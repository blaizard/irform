/* irform.min.js (2018.05.14) by Blaise Lengrand\n */
!function(n){n.irRequire||(n.irRequire=function(t,i){return new Promise(function(e,r){n.irRequire.a(t,e,r,i||3e4)})},n.irRequire.a=function(functionName,resolve,reject,timeout){"string"==typeof functionName&&(functionName=[functionName]);var ready=1,poll=1;if(functionName.forEach(function(name){try{if(void 0===eval(name))throw 1;n.irRequire.h(name)}catch(e){ready=0;var m=irRequire.map;for(m[name]instanceof Array||(m[name]=m[name]?[m[name]]:[]);m[name].length;){var url=m[name].shift();if(m[url])return poll=0,irRequire(url,timeout).then(function(){irRequire.a(functionName,resolve,reject,timeout)});n.irRequire.h(name,url);var desc=0<=url.search(/\.css$/i)?["link","href",{rel:"stylesheet",type:"text/css"}]:["script","src",{type:"text/javascript",async:!0}],d=document;if(!d.querySelector(desc[0]+"["+desc[1]+'="'+url+'"]')){var elt=d.createElement(desc[0]);elt[desc[1]]=url,Object.assign(elt,desc[2]),elt.onerror=function(){reject(new Error("cannot load "+(elt.src||elt.href)))},d.getElementsByTagName("head")[0].appendChild(elt)}}}}),ready){var r=functionName.map(function(name){return eval(name)});resolve(1==r.length?r[0]:r)}else poll&&(0<timeout?setTimeout(function(){irRequire.a(functionName,resolve,reject,timeout-100)},100):reject(new Error(functionName.join()+" timed-out")))},n.irRequire.map={},n.irRequire.h=function(){})}(window);var Irform=function(r,t,e){this.container=$(r),this.formDescription=t,this.options=$.extend(!0,{},Irform.defaultOptions,e),this.container.empty(),this.container.addClass("irform-layout"),this.events={},this.options.hookInit.call(this),this.create(r,t);var i=this;this.container.on("focus",".irform",function(){i.trigger("focus",this)})};Irform.CHAR_A_Z=1,Irform.CHAR_0_9=2,Irform.CHAR_SPACE=4,Irform.CHAR_SPECIAL=8,Irform.CHAR_DASH=16,Irform.CHAR_UPPERCASE_ONLY=32,Irform.CHAR_LOWERCASE_ONLY=64,Irform.EMAIL={rule:"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+.[a-zA-Z]{2,}$",msg:"Please enter a valid email"},Irform.defaultOptions={fields:{input:function(r,t){return $("<input>",{type:"text",name:r,class:"irform",placeholder:t.placeholder})},checkbox:function(r,t){var e=function(r,t,e){var i=$("<div>",{class:e?"irform-inline":""}),n=$("<input>",{type:"checkbox",name:r,class:"irform",id:"irform-checkbox-"+ ++Irform.unique});return $(i).append(n),$(i).append('<label for="'+$(n).prop("id")+'">'+t+"</label>"),i};if(!t.list)return e(r,"",!1);if(1==t.list.length)return e(r,t.list[0],!1);var i=$("<div>",{class:"irform-container",name:r}),n=t.list;for(var a in n){var o=e("string"==typeof a?a:n[a],n[a],t.inline);$(i).append(o)}return i},switch:function(r){var t=$("<div>",{class:"irform irform-switch",tabIndex:"0"}),e=$("<input>",{type:"checkbox",name:r,id:"irform-switch-"+ ++Irform.unique});return $(t).append(e),$(t).append('<label for="'+$(e).prop("id")+'"></label>'),t},password:function(r,t){return $("<input>",{type:"password",name:r,class:"irform",placeholder:t.placeholder})},textarea:function(r,t){return $("<textarea>",{name:r,class:"irform",placeholder:t.placeholder})},submit:function(r,t){var e=$("<button>",{type:"button",name:r,class:"irform"});$(e).html(t.value||"Submit");var i=this;return $(e).click(function(){i.submit(t.callback)}),e},select:function(r,t){var e=$("<select>",{name:r,class:"irform"}),i=t.list;for(var r in i){var n=$("<option>",{value:i instanceof Array?i[r]:r});$(n).html(i[r]),$(e).append(n)}return e}},defaultType:"input",wrapper:function(r,t){var e=$("<div>");if("string"==typeof t.caption){var i=$("<div>",{class:"irform-caption"});$(i).text(t.caption),$(e).append(i)}var n=$("<div>",{class:"irform-elements"});return $(n).append(r),$(e).append(n),e},callbackError:function(r){for(var t in this.container.find(".irform-item.error").removeClass("error"),r){var e="",i=null,n=r[t];switch($(n.item).removeClass("success").addClass("error"),n.type){case"required":e="This field is required",i="required-"+n.name;break;case"validation":e=n.msg?n.msg:"This field does not validate",i="validation-"+n.name}e&&Irnotify(e,{container:$(n.item).find(".irform-elements"),type:"error",id:i})}},callbackSuccess:function(r,t){$(r).removeClass("error").addClass("success"),Irnotify.delete("*",r)},callbackClean:function(){Irnotify.delete("*",this.container)},disable:function(r,t){var e=Irform.findNameHolder(t);$(e).find("input,textarea,select,button").add(e).prop("disabled",r),$(t).find("input,textarea,select,button").filter(".irform").prop("disabled",r),r?$(t).addClass("disable"):$(t).removeClass("disable"),Irform.queue(e,function(){$(e).trigger(r?"disable":"enable")})},hookInit:function(){}},Irform.validate=function(r,t){if("string"==typeof t){var e=[];return r&Irform.CHAR_UPPERCASE_ONLY&&/[a-z]/g.test(t)?"This field must be upper case only":r&Irform.CHAR_LOWERCASE_ONLY&&/[A-Z]/g.test(t)?"This field must be lower case only":(r&Irform.CHAR_A_Z&&(t=t.replace(/[a-z]/gi,""),e.push("alphanumeric characters")),r&Irform.CHAR_0_9&&(t=t.replace(/[0-9]/g,""),e.push("numbers")),r&Irform.CHAR_DASH&&(t=t.replace(/-_/g,""),e.push("underscores (_), dashes (-)")),r&Irform.CHAR_SPACE&&(t=t.replace(/[ ]/g,""),e.push("spaces")),r&Irform.CHAR_SPECIAL&&(t=t.replace(/[!"#\$%&'\(\)\*\+,\-\.\/:;<=>\?@\[\\\]^_`\{\|\}~]/g,""),e.push("special characters")),""===t||!e.length||"This field only accepts "+e.join(", "))}return!0},Irform.findNameHolder=function(r,t){return void 0===t&&(t=$(r).hasClass("irform-item")?$(r).attr("data-irform"):null),$(r).find("[name"+(t?"="+t:"")+"]").addBack("[name"+(t?"="+t:"")+"]").first()},Irform.prototype.on=function(r,t){this.events.hasOwnProperty(r)||(this.events[r]=[]),this.events[r].push(t)},Irform.prototype.trigger=function(r){var t=Array.prototype.slice.call(arguments,1);for(var e in this.events[r])this.events[r][e].apply(this,t)},Irform.prototype.create=function(r,t){for(var e in void 0===Irform.unique&&(Irform.unique=0),t){var a=this,i=$.extend({name:"irform"+ ++Irform.unique,type:this.options.defaultType,required:!1,validate:null,mask:null,disabled:!1,ignore:void 0===t[e].name,options:{}},t[e]),n=i.name,o=(t[e]=i).type;if("function"==typeof this.options.fields[o]){var s=this.options.fields[o].call(this,n,i,function(){$(this).removeClass("irform-pending"),Irform.queue(this)}),f=Irform.findNameHolder(s,n);$(f).on("change",function(){var r=$(this).prop("name")||$(this).attr("name"),t=Irform.get(this)[r],e=$(this).closest(".irform-item"),i=$(e).data("irform");if(!Irform.isEmpty(t)&&i.validate){var n=a.validate(e,t);!0===n?a.options.callbackSuccess.call(a,e,r):a.options.callbackError.call(a,[{type:"validation",msg:n,item:e,name:r,options:i}])}else!Irform.isEmpty(t)&&$(e).hasClass("required")&&a.options.callbackSuccess.call(a,e,r);"function"==typeof i.onchange?i.onchange.call(a,e,t):"object"==typeof i.onchange&&($(this).data("nextElement")&&$(e).nextUntil($(this).data("nextElement")).remove(),$(this).data("nextElement",$(e).next()),"object"==typeof i.onchange[t]?a.create(e,i.onchange[t]):"object"==typeof i.onchange.__default__&&a.create(e,i.onchange.__default__))});var l=this.options.wrapper.call(this,s,i,n);$(l).addClass("irform-item"),i.width&&$(l).css("width",i.width),i.align&&i.align.replace(/\s\s+/g," ").toLowerCase().split(" ").map(function(r){$(l).addClass("irform-align-"+r.trim())}),$(l).attr("data-irform",n),i.required&&$(l).addClass("required"),i.disabled&&Irform.queue(f,function(){a.options.disable.call(a,!0,$(this).closest(".irform-item"))}),i.mask&&$(f).on("input",function(){var r=$(this).closest(".irform-item").data("irform");Irform.mask(this,r.mask)}),$(l).data("irform",i),$(r).hasClass("irform-item")?$(r).after(l):$(r).append(l)}else console.log("'"+o+"' is not supported")}for(var e in t){n=t[e].name,f=Irform.findNameHolder(this.container,n);Irform.queue(f,function(){$(this).trigger("change")})}},Irform.mask=function(r,t){for(var e=$(r).val(),i="",n=0;n<t.length&&e;n++){var a=e[0];if("9"==t[n]){if(/[^0-9]/.test(a))break}else if("z"==t[n]){if(/[^a-z]/i.test(a))break}else if("*"==t[n]){if(/[^a-z0-9]/i.test(a))break}else if(t[n]!=a){i+=t[n];continue}i+=a,e=e.substr(1)}$(r).val(i)},Irform.prototype.submit=function(r){var t=this.get();if(!1!==t)if("function"==typeof r)r.call(this,t);else if(this.container.is("form")){var e=$("<form>",{action:this.container.prop("action"),method:this.container.prop("method")||"POST",enctype:"multipart/form-data",style:"display: none;"}),n=function(r,t){var e="";for(var i in r)"object"==typeof r[i]?e+=n(r[i],t?t+"["+i+"]":i):e+='<input name="'+(t?t+"["+i+"]":i)+'" value="'+(r[i]+"").replace(/"/g,"&quot;")+'"/>';return e},i=n(t,"");$(e).html(i),this.container.find("input[type=file]").each(function(){$(this).appendTo(e)}),$("body").append(e),e.submit()}},Irform.prototype.findNameHolder=function(r){return Irform.findNameHolder(this.container,r)},Irform.prototype.disable=function(){var t=this.options.disable;this.each(function(r){t.call(this,!0,r)})},Irform.prototype.enable=function(){var t=this.options.disable;this.each(function(r){t.call(this,!1,r)})},Irform.prototype.update=function(r){var t=this.get(function(){},!0);this.container.empty(),this.formDescription=r,this.create(this.container,r),this.set(t)},Irform.prototype.ignore=function(r,t){var e=$(r).data("irform");e.ignore=t,$(r).data("irform",e)},Irform.prototype.validate=function(r,t){var e=$(r).data("irform");return function r(t,e,i,n){var a=function(r){return!0===r||n||r};if($.isArray(i))for(var o in i){var s=r.call(this,t,e,i[o],n);if(!0!==s)return s}else{if("object"==typeof i)return r.call(this,t,e,i.rule,i.msg);if("number"==typeof i)return a(Irform.validate(i,e));var f;if("string"==typeof i)return!0===Irform.validate(Irform.CHAR_A_Z|Irform.CHAR_0_9|Irform.CHAR_DASH,i)&&(f=this.findNameHolder(i)).length?a(e==f.val()||"This field does not match '"+i+"'"):a(!!new RegExp(i,"g").test(e)||null);if("function"==typeof i)return a(i.call(this,e,t))}return!0}.call(this,r,t,e.validate,null)},Irform.prototype.each=function(r){var t=this;this.container.find(".irform-item").each(function(){r.call(t,this)})},Irform.prototype.get=function(a,o){var s=!1,f=[],l=this;void 0===o&&(o=!1);var t=$();this.each(function(r){t=t.add($("[name="+$(r).attr("data-irform")+"]"))}),this.options.callbackClean.call(this);var r=Irform.get(t,function(r,t){var e=$(this).closest(".irform-item"),i=e.data("irform");if(!o){if(i.ignore)return null;var n;if(Irform.isEmpty(t)&&e.hasClass("required")&&(f.push({type:"required",item:e,name:r,options:i}),s=!0),i.validate)!0!==(n=l.validate(e,t))&&(f.push({type:"validation",msg:n,item:e,name:r,options:i}),s=!0);if("function"==typeof a)if(void 0!==(n=a.call(l,e,r,t)))return n}});return s?(this.options.callbackError.call(this,f),!1):r},Irform.prototype.set=function(r){var t={};do{var e=!1;Irform.set(this.container,r,function(r){if(void 0!==t[r])return null;t[r]=!0,e=!0})}while(e)},Irform.queue=function(r,t){if("function"==typeof t){if($(r).hasClass("irform-pending"))(e=$(r).data("irform-queue")||[]).push(t),$(r).data("irform-queue",e);else t.call(r)}else{for(var e=$(r).data("irform-queue")||[];e.length;){(t=e.shift()).call(r)}$(r).data("irform-queue",[])}},Irform.set=function(t,i,n){var r=$(t).find("[name]").addBack("[name]").not("a").filter(function(){var r=$(this).parent().closest("[name]");return 0==r.length||0==$(t).find(r).length&&0==$(t).filter(r).length}),a=0;$(r).each(function(){var r=$(this).prop("name")||$(this).attr("name");if(void 0!==i[r]){var t=i[r];if("function"==typeof n){var e=n.call(this,r,t);if(void 0!==e){if(null===e)return;t=e}}Irform.queue(this,function(){$(this).hasClass("irform-container")?Irform.set($(this).children(),t):$(this).is("input[type=checkbox]")?$(this).prop("checked",t):$(this).val(t),$(this).trigger("change")}),delete i[r],a++}}),!jQuery.isEmptyObject(i)&&a&&Irform.set(t,i,n)},Irform.get=function(t,i){var n={},r=$(t).find("[name]").addBack("[name]").not("a").filter(function(){var r=$(this).parent().closest("[name]");return 0==r.length||0==$(t).find(r).length&&0==$(t).filter(r).length});return $(r).each(function(){if(!$(this).hasClass("irform-pending")){var r=$(this).prop("name")||$(this).attr("name");if(r){var t=$(this).hasClass("irform-container")?Irform.get($(this).children()):$(this).is("input[type=checkbox]")?$(this).is(":checked")?"selected":"":$(this).val();if("function"==typeof i){var e=i.call(this,r,t);if(void 0!==e){if(null===e)return;t=e}}n[r]=t}}}),n},Irform.jQueryHookVal=function(e,i,n){var a=jQuery.fn.val;jQuery.fn.val=function(r){if(!arguments.length)return $(this).is(e)?i.call(this):a.apply(this,arguments);var t=r;return $(this).each(function(){var r=t;$(this).is(e)?n.call(this,r):a.call($(this),r)}),this}},Irform.clear=function(r){$(r).find(".irform-array").trigger("array-empty"),$(r).find("[name]").val("").trigger("change")},Irform.isEmpty=function(r){if("object"==typeof r){var t=!0;for(var e in r)t&=Irform.isEmpty(r[e]);return t}return!r};var Irnotify=function(e,i){var t=(i=$.extend(!0,{},Irnotify.defaults,i)).container;i.id&&Irnotify.delete(i.id,t);var n=$(t).children(".irnotify");if(n.length||(n=$("<div/>",{class:"irnotify"}),$(t).prepend(n)),i.group){var r=$(n).children(".irnotify-group."+i.type);r.length||(r=$("<div/>",{class:"irnotify-group "+i.type}),$(n).prepend(r)),n=r}var o=$("<div/>",{class:"irnotify-entry "+i.type+(i.id?" irnotify-id-"+i.id:"")}),d=$("<div/>",{class:"message"});if($(d).html(e),$(o).append(d),i.delete){var s=$("<div/>",{class:"delete"});$(s).html(i.delete),$(s).click(function(){Irnotify.delete(this)}),$(o).append(s)}$(n).append(o),this.entry=o};Irnotify.prototype.delete=function(){Irnotify.delete(this.entry)},Irnotify.delete=function(e,i){"string"==typeof e&&(e=$(i||"body").find("*"==e?"[class*=irnotify-id-]":".irnotify-id-"+e)),$(e).closest(".irnotify-entry").each(function(){var e=$(this),i=e.parent();e.remove(),i.hasClass("irnotify-group")&&!i.children().length&&(i=(e=i).parent(),e.remove()),i.hasClass("irnotify")&&!i.children().length&&i.remove()})},Irnotify.defaults={group:!1,id:null,delete:'<span class="icon-cross"></span>',type:"info",container:"body"};!function(f){f.fn.irformArray=function(r,t){var a;return f(this).each(function(){a=f().irformArray.x.call(this,r,t)}),void 0===a?f(this):a},f.fn.irformArray.x=function(r){var t=f.fn.irformArray.defaults,a="create";switch("string"==typeof r&&(a=r),"create"!=a&&f(this).data("irformArray")&&(t=f(this).data("irformArray")),"object"==typeof r&&(t=f.extend(!0,{},t,r)),f(this).data("irformArray",t),a){case"create":f.fn.irformArray.create.call(this)}},f.fn.irformArray.deleteItem=function(r){!0!==f(this).prop("disabled")&&f(r).remove()},f.fn.irformArray.moveItemUp=function(r){if(!0!==f(this).prop("disabled")){var t=f(r).prev(".irform-array-item");t.length&&(f(r).detach(),t.before(r))}},f.fn.irformArray.moveItemDown=function(r){if(!0!==f(this).prop("disabled")){var t=f(r).next(".irform-array-item");t.length&&(f(r).detach(),t.after(r))}};var s=null;f(document).on("mouseup touchend",function(r){s&&(r.stopPropagation(),f(s.item).removeClass("irform-array-item-drag"),f(s.obj).addClass("irform-array-drag"),f(s.placeholder).parents("html").length&&(f(s.item).detach(),f(s.placeholder).before(s.item)),f(s.placeholder).remove(),s=!1)});f.fn.irformArray.add=function(){var r=this,t=f(this).data("irformArray"),a=t.template,e=f("<div>",{class:"irform-array-item"});if(t.inline&&(f(e).addClass("inline"),f(e).css("display","inline-block")),t.isDelete){var o=f("<div>",{class:"irform-array-item-del"});f(o).html(t.delete),f(o).click(function(){f.fn.irformArray.deleteItem.call(r,e)}),f(e).append(o)}if(t.isMove){var i=f("<div>",{class:"irform-array-item-up"});f(i).html(t.up),f(i).click(function(){f.fn.irformArray.moveItemUp.call(r,e)}),f(e).append(i);var n=f("<div>",{class:"irform-array-item-down"});f(n).html(t.down),f(n).click(function(){f.fn.irformArray.moveItemDown.call(r,e)}),f(e).append(n)}var l=f("<div>",{class:"irform-array-item-content"});"function"==typeof a?f(l).html(a.call(r,e)):"object"==typeof a?new Irform(l,a):f(l).html(f(a).clone(!0,!0)),f(e).append(l),f(this).find(".irform-array-content:first").append(e),t.hookAdd.call(r,e)},f.fn.irformArray.clear=function(){f(this).find(".irform-array-content:first").empty()},f.fn.irformArray.create=function(){var i=this,r=f(this).data("irformArray");f(i).empty(),f(i).addClass("irform-array"),f(i).attr("name",r.name);var n=f("<div>",{class:"irform-array-content",style:r.inline?"display:inline-block;":""});if(f(i).append(n),r.isDrag){var l=function(r){return r.originalEvent.touches&&r.originalEvent.touches.length?{x:r.originalEvent.touches[0].pageX,y:r.originalEvent.touches[0].pageY}:{x:r.pageX,y:r.pageY}};f(n).on("mousemove touchmove",function(r){if(s){var t=l(r);s.init&&(f(s.placeholder).html("&nbsp;"),f(s.item).before(s.placeholder),f(s.item).addClass("irform-array-item-drag"),f(i).addClass("irform-array-drag"),s.init=!1),f(s.item).css({left:t.x+s.offsetX,top:t.y+s.offsetY});var a=document.elementsFromPoint(t.x-f(document).scrollLeft(),t.y-f(document).scrollTop()),e=a.indexOf(n.get(0));if(0<e&&a[e-1].classList.contains("irform-array-item")&&!a[e-1].classList.contains("irform-array-placeholder")){f(s.placeholder).detach();var o=a[e-1];do{if(f(o).offset().left<=t.x&&f(o).offset().top<=t.y&&f(o).offset().left+f(o).outerWidth(!0)>=t.x&&f(o).offset().top+f(o).outerHeight(!0)>=t.y){f(o).before(s.placeholder);break}o=f(o).next()}while(f(o).length);f(o).length||f(i).find(".irform-array-item:last").after(s.placeholder)}}}),f(n).on("mousedown touchstart",r.dragHandleSelector,function(r){r.stopPropagation(),r.preventDefault();var t=l(r),a=f(this).closest(".irform-array-item");s={init:!0,obj:i,item:a,offsetX:f(a).offset().left-t.x-f(document).scrollLeft(),offsetY:f(a).offset().top-t.y-f(document).scrollTop(),placeholder:f("<div/>",{class:"irform-array-placeholder "+f(a).attr("class"),style:"width: "+f(a).width()+"px; height: "+f(a).height()+"px; "+f(a).attr("style")})}})}if(f(i).on("array-add",function(r){r.stopPropagation(),f.fn.irformArray.add.call(i)}),f(i).on("array-empty",function(r){r.stopPropagation(),f.fn.irformArray.clear.call(i)}),r.isAdd){var t=f("<div>",{class:"irform-array-add",style:"display:inline-block;"});f(t).html(r.add),f(t).click(function(){!0!==f(i).prop("disabled")&&f(i).trigger("array-add")}),f(i).append(t)}if(r.custom){var a=f("<div>",{style:"display:inline-block;"});f(a).html(r.custom),f(i).append(a)}},f.fn.irformArray.defaults={name:null,template:'<input class="irform" type="text" name="text" />',inline:!1,isDelete:!0,isAdd:!0,isMove:!0,isDrag:!1,dragHandleSelector:".irform-array-item",delete:'<button class="irform dock-left" type="button"><span class="icon-cross"></span></button>',add:'<button class="irform" type="button"><span class="icon-plus"></span> Add</button>',up:'<button class="irform dock-right" type="button"><span class="icon-arrow-up"></span></button>',down:'<button class="irform dock-left dock-right" type="button"><span class="icon-arrow-down"></span></button>',custom:null,hookAdd:function(){},hookValWrite:function(r){return r},hookValRead:function(r){return r}}}(jQuery),Irform.jQueryHookVal(".irform-array",function(){var t=[];return $(this).children(".irform-array-content:first").children(".irform-array-item").each(function(r){t[r]=Irform.get(this)}),$(this).data("irformArray").hookValRead.call(this,t)},function(r){var t=$(this).data("irformArray");for(var a in r=t.hookValWrite.call(this,r),$(this).trigger("array-empty"),r){$(this).trigger("array-add");var e=$(this).children(".irform-array-content:first").children(".irform-array-item:last");Irform.set(e,r[a])}}),Irform.defaultOptions.fields.array=function(r,t){var a=$("<div>");return $(a).irformArray({name:r,template:t.template}),a};!function(o){o.fn.irformArrayTags=function(r){o(this).irformArray(o.extend(!0,o.fn.irformArrayTags.defaults,r))},o.fn.irformArrayTags.defaults={template:'<div><div class="irform-array-tags-edit irform inline"></div><div class="irform-array-tags-tag irform border inline clickable" style="display: none;"><div class="irform-array-item-text"></div><div class="irform-array-item-del" style="margin-left: 10px;"><div class="icon-cross"></div></div></div></div>',templateInput:'<input type="text" class="irform inline" name="keyword"/>',isMove:!1,isDelete:!1,isDrag:!0,isArray:!1,dragHandleSelector:".irform-array-item .irform-array-tags-tag > div:not(.irform-array-item-del)",inline:!0,hookAdd:function(i){var r=o(this).data("irformArray"),t=o(i).find(".irform-array-tags-edit:first");"object"==typeof r.templateInput?new Irform(t,r.templateInput):t.html(o(r.templateInput).clone(!0,!0));var a=this,e=o(i).find(".irform-array-tags-edit"),n=o(i).find(".irform-array-tags-tag");o(i).find("input").on("blur",function(){var r=o(this).val();r?(o(e).hide(),o(n).find("div.irform-array-item-text").text(r),o(n).show()):o().irformArray.deleteItem.call(a,i)}).on("change",function(){o(this).trigger("blur")}),o(n).click(function(){!0!==o(a).prop("disabled")&&(o(a).find(".irform-array-item").not(i).find("input").trigger("blur"),o(this).hide(),o(e).show())}),o(i).find(".irform-array-item-del").click(function(){o().irformArray.deleteItem.call(a,i)}),o(this).find(".irform-array-item").not(i).find("input").trigger("blur")},hookValWrite:function(r){return o(this).data("irformArray").isArray?r.map(function(r){return{keyword:(r||"").trim()}}):r.split(",").map(function(r){return{keyword:(r||"").trim()}})},hookValRead:function(r){return o(this).data("irformArray").isArray?r.map(function(r){return r.keyword}):r.map(function(r){return r.keyword}).join(", ")}}}(jQuery),Irform.defaultOptions.fields.tags=function(r,i){var t=$("<div>");return t.irformArrayTags({name:r,templateInput:i.template,isArray:i.isArray,isDrag:i.isDrag}),t};!function(a){a.fn.irformArrayImages=function(r){var n=this;a(this).irformArray(a.extend(!0,a.fn.irformArrayImages.defaults,{custom:a("<div/>").irformFile({showInput:!1,hookSelect:function(r,i){a(n).trigger("array-add"),console.log(r,i)}})},r))},a.fn.irformArrayImages.defaults={template:'<span class="irform-array-images irform"><span class="irform-array-images-del"><span class="icon-cross"></span></span><img /><input name="img" style="display: none;" /></span>',isMove:!1,isDelete:!1,isAdd:!1,isDrag:!0,dragHandleSelector:".irform-array-item img",inline:!0,hookAdd:function(i){var r=this;a(i).find("input").on("blur",function(){var r=a(this).val();a(i).find("img").attr("src",r)}).on("change",function(){a(this).trigger("blur")}),a(i).find(".irform-array-images-del").click(function(){a().irformArray.deleteItem.call(r,i)})},hookValWrite:function(r){return r.map(function(r){return{img:r.trim()}})},hookValRead:function(r){return r.map(function(r){return r.img})}}}(jQuery),Irform.defaultOptions.fields.images=function(r){var i=$("<div>");return i.irformArrayImages({name:r}),i};!function(f){f.fn.irformDropdown=function(t,o){var r;return f(this).each(function(){r=f().irformDropdown.x.call(this,t,o)}),void 0===r?f(this):r},f.fn.irformDropdown.x=function(t){var o=f.fn.irformDropdown.defaults,r="create";switch("string"==typeof t&&(r=t),"create"!=r&&f(this).data("irformDropdown")&&(o=f(this).data("irformDropdown")),"object"==typeof t&&(o=f.extend(!0,{},o,t)),f(this).data("irformDropdown",o),r){case"create":f.fn.irformDropdown.create.call(this)}},f(document).on("mousedown touchstart",function(){f(".irform-dropdown-menu").hide()}),f.fn.irformDropdown.create=function(){var e=f(this).data("irformDropdown"),a=this;f.fn.irformDropdown.setList.call(this,e.list);var t=f("<div>",{class:"irform-dropdown"}),o=f("<input>",{name:e.name,style:"display: none;"});f(t).append(o);var r=f("<div>",{contenteditable:e.editable,tabindex:"0",class:"irform "+(e.selectMode?"irform-dropdown-select":"irform-dropdown-input")});f(t).append(r);var s=f("<div>",{class:"irform-dropdown-menu"});f(s).on("click",".irform-dropdown-item",function(){f(r).html(f(this).html()),f(o).val(f(this).attr("data-value")),f(s).hide()}),f(s).on("mousedown touchstart",function(t){t.stopPropagation()}),f(t).append(s),e.selectMode&&f(r).on("click",function(t){f(this).trigger("input",!0)}),f(r).on("keyup paste cut",function(){f(o).val(f(this).text())}),f(o).on("change",function(){f(r).text(f(this).val())}),f(r).on("input",function(t,i){var o=f(this).text(),r=e.updateList.call(this,o),n=function(t){t&&f.fn.irformDropdown.setList.call(a,t);var r=[],n=o.toLowerCase();f(a).data("irformDropdown-list").forEach(function(t){var o=i?1:f.fn.irformDropdown.search(n,t[0],e.minWeight);0<o&&r.push([o,t[1],t[2]])}),f(s).empty().show(),r.sort(function(t,o){return o[0]-t[0]}).slice(0,e.maxResults).forEach(function(t){var o=f("<div>",{class:"irform-dropdown-item"});f(o).attr("data-value",t[1]),e.acceptHTML?o.html(t[2]):o.text(t[2]),f(s).append(o)})};r instanceof Promise?r.then(n).catch(console.error):n(r)}),f(this).append(t)},f.fn.irformDropdown.search=function(t,o,r){var n=t.charAt(0);if(!n)return 0;for(var i=-1,e=0;-1!=(i=o.indexOf(n,i+1));){for(var a=i?.9:1,s=i,f=1;f<t.length;++f){var d=t.charAt(f);o.charAt(s+1)==d?(a+=1,s+=1):o.charAt(s+2)==d?(a+=.5,s+=2):o.charAt(s-1)==d?a+=.5:++s}e=Math.max(e,a)}return e/=t.length,!r||r<e?e:0},f.fn.irformDropdown.setList=function(t){var r=f(this).data("irformDropdown").acceptHTML?function(t){return f("<span/>").html(t).text()}:function(t){return t},n=[];if(t instanceof Array)t.forEach(function(t){var o=r(t);n.push([o.toLowerCase(),o,t])});else for(var o in t)n.push([r(t[o]).toLowerCase(),o,t[o]]);f(this).data("irformDropdown-list",n)},f.fn.irformDropdown.defaults={name:"dropdown",editable:!0,minWeight:.6,maxResults:10,selectMode:!0,acceptHTML:!1,updateList:function(t){},list:[]}}(jQuery),Irform.defaultOptions.fields.dropdown=function(t,o){var r=$("<div>"),n={name:t,list:o.list};return"object"==typeof o.options&&(n=$.extend(!0,n,o.options)),$(r).irformDropdown(n),r};!function(a){a.fn.irformCustom=function(t,r){var o;return a(this).each(function(){o=a().irformCustom.x.call(this,t,r)}),void 0===o?a(this):o},a.fn.irformCustom.x=function(t,r){var o=a.fn.irformCustom.defaults,i="create";switch("string"==typeof t&&(i=t),"create"!=i&&a(this).data("irformCustom")&&(o=a(this).data("irformCustom")),"object"!=typeof t&&"create"!=i||(o=a.extend(!0,{},o,t)),a(this).data("irformCustom",o),i){case"create":a.fn.irformCustom.create.call(this)}},a.fn.irformCustom.create=function(){a(this).addClass("irform irform-custom"),a(this).html("&nbsp;")},a.fn.irformCustom.defaults={value:null,hookValWrite:function(t){return[t,t]},hookValRead:function(t){return t}}}(jQuery),Irform.jQueryHookVal(".irform-custom",function(){var t=$(this).data("irformCustom");return t.hookValRead.call(this,t.value)},function(t){var r=$(this).data("irformCustom"),o=r.hookValWrite.call(this,t);r.value=o[0],$(this).data("irformCustom",r),$(this).html(o[1])});!function(a){a.fn.irformTinymce=function(e,i){var t;return a(this).each(function(){t=a().irformTinymce.x.call(this,e,i)}),void 0===t?a(this):t},a.fn.irformTinymce.x=function(e){var i=a.fn.irformTinymce.defaults,t="create";switch("string"==typeof e&&(t=e),"create"!=t&&a(this).data("irformTinymce")&&(i=a(this).data("irformTinymce")),"object"==typeof e&&(i=a.extend(!0,{},i,e)),a(this).data("irformTinymce",i),t){case"create":a.fn.irformTinymce.create.call(this)}},a.fn.irformTinymce.create=function(){void 0===a.fn.irformTinymce.create.id&&(a.fn.irformTinymce.create.id=0);var n=this,r=a(this).data("irformTinymce");a(this).addClass("irform-tinymce irform-pending"),a(this).attr("name",r.name),a(this).attr("id")||a(this).attr("id","irform-tinymce-id"+a.fn.irformTinymce.create.id++);var e=a.extend(!0,{selector:"#"+a(this).attr("id"),convert_urls:!1,file_browser_callback:function(i,e,t){r.callbackBrowser.call(n,t,function(e){a("#"+i).val(e)})},init_instance_callback:function(){r.callbackIsReady.call(n)},setup:function(e){e.on("change",function(){a(n).trigger("change")})}},r.tinymce);a(this).on("disable",function(){tinyMCE.get(a(this).prop("id")).setMode("readonly")}),a(this).on("enable",function(){tinyMCE.get(a(this).prop("id")).setMode("design")}),r.css&&(e.content_css=r.css),r.cssClass&&(e.body_class=r.cssClass),r.baseURL&&(e.document_base_url=r.baseURL),r.tinymceBase&&(tinymce.baseURL=r.tinymceBase),tinymce.suffix=".min",setTimeout(function(){tinymce.init(e)},100)},a.fn.irformTinymce.defaults={name:null,tinymceBase:null,baseURL:null,css:null,cssClass:null,callbackIsReady:function(){},callbackBrowser:function(){},tinymce:{menubar:!1,statusbar:!1,autoresize_max_height:a(window).innerHeight()-100,toolbar:"undo redo | styleselect | bold italic | forecolor | removeformat | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media table | code | fullscreen",plugins:["advlist autolink autoresize link image lists charmap print preview hr anchor pagebreak spellchecker","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","save table contextmenu directionality emoticons template paste textcolor"]}}}(jQuery),Irform.jQueryHookVal(".irform-tinymce",function(){return tinyMCE.get($(this).prop("id")).getContent()},function(e){return tinyMCE.get($(this).prop("id")).setContent(e)}),Irform.defaultOptions.fields.htmleditor=function(e,i,t){var n=$("<div>");return $(n).irformTinymce($.extend(!0,{},{name:e,callbackIsReady:function(){t.call(this)}},i.options)),n};!function(f){f.fn.irformFile=function(i,t){var e;return f(this).each(function(){e=f().irformFile.x.call(this,i,t)}),void 0===e?f(this):e},f.fn.irformFile.x=function(i){var t=f.fn.irformFile.defaults,e="create";switch("string"==typeof i&&(e=i),"create"!=e&&f(this).data("irformFile")&&(t=f(this).data("irformFile")),"object"==typeof i&&(t=f.extend(!0,{},t,i)),f(this).data("irformFile",t),e){case"create":f.fn.irformFile.create.call(this)}},f.fn.irformFile.create=function(){var i=f(this).data("irformFile"),o=this,t=f("<div>",{class:"irform-group"}),n=f("<input>",{name:i.name,class:"irform",style:i.showInput?"":"display: none;"});for(var e in f(t).append(n),i.showInput||f(t).append(f("<span/>")),i.buttonList){var a=i.buttonList[e],r=i.presets[a],l=f("<button>",{class:"irform",type:"button"});f(l).text(r.caption),f(l).data("irformFile",r),f(l).click(function(){var i=function(i){i&&t.hookSelect.call(o,a,i),f(n).val(i)},t=f(o).data("irformFile"),e=f(this).data("irformFile");t.clean&&t.clean.call(o,i),t.clean=e.clean?e.clean:null,f(o).data("irformFile",t),e.action.call(o,i,e.options)}),f(t).append(l)}f(this).append(t)},f.fn.irformFile.defaults={name:"file",buttonList:["upload"],fileType:null,showInput:!0,hookSelect:function(i,t){},presets:{upload:{caption:"Upload",action:function(e,i){var t=f(this).data("irformFile"),o=f("<input>",{type:"file",class:"irform-file-upload",name:t.name+("multi"==i.mode?"[]":""),multiple:"multi"==i.mode});f(o).on("change",function(){var i="";if("object"==typeof this.files)for(var t=0;t<this.files.length;t++)i+=(i?" ":"")+'"'+this.files.item(t).name+'"';e(i)}),f(o).on("click",function(i){i.stopPropagation()}),f(o).hide(),f(this).append(o),f(o).trigger("click")},options:{mode:"multi"},clean:function(i){i(""),f(this).find(".irform-file-upload").remove()}}}}}(jQuery),Irform.defaultOptions.fields.file=function(i,t){var e=$("<div>"),o={name:i};return"object"==typeof t.options&&(o=$.extend(!0,o,t.options)),$(e).irformFile(o),e};!function(s){s.fn.irformModal=function(a,o){var t;return s(this).each(function(){t=s().irformModal.x.call(this,a,o)}),void 0===t?s(this):t},s.fn.irformModal.x=function(a){var o=s.fn.irformModal.defaults,t="create";switch("string"==typeof a&&(t=a),"create"!=t&&s(this).data("irformModal")&&(o=s(this).data("irformModal")),"object"==typeof a&&(o=s.extend(!0,{},o,a)),s(this).data("irformModal",o),t){case"create":s.fn.irformModal.create.call(this);break;case"close":s.fn.irformModal.close.call(this)}},s.fn.irformModal.defaults={zIndex:99999,closeOnClickOutside:!0,isCancel:!1,onValidate:null,validate:'<button class="irform" type="button"><span class="icon-check"></span>&nbsp;Validate</button>',cancel:'<button class="irform" type="button"><span class="icon-cross"></span>&nbsp;Cancel</button>'},s.fn.irformModal.create=function(){var t=this,a=s(this).data("irformModal"),o=s("<div>",{class:"irform-modal-container"}),r=s("<div>",{class:"irform-modal-content"});s(r).append(this),s(o).append(r);var i=s("<div>",{class:"irform-modal-control"});if(a.isCancel){var n=s("<span>");s(n).html(a.cancel),s(n).click(function(){s.fn.irformModal.close.call(t)}),s(i).append(n)}if(a.onValidate){var l=s("<span>");s(l).html(a.validate),s(l).click(function(){s(t).data("irformModal").onValidate.call(t),s.fn.irformModal.close.call(t)}),s(i).append(l)}s(o).append(i);var e=s("<div>",{class:"irform-modal"});s(e).css({top:0,left:0,width:"100%",height:"100%",position:"fixed",zIndex:a.zIndex}),s(e).append(o),a.container=e,a.overflow=s("body").css("overflow"),s(this).data("irformModal",a),a.closeOnClickOutside&&(s(e).data("irformModal",0),s(e).mousedown(function(a){s(this).data("irformModal",a)}).mouseup(function(a){var o=s(this).data("irformModal");o&&Math.abs(o.pageX-a.pageX)<5&&Math.abs(o.pageY-a.pageY)<5&&(a.preventDefault(),s.fn.irformModal.close.call(t)),s(this).data("irformModal",0)}),s(o).mousedown(function(a){return a.stopPropagation(),!1}).mouseup(function(a){return a.stopPropagation(),!1})),s("body").append(e),s("body").css("overflow","hidden")},s.fn.irformModal.close=function(){var a=s(this).data("irformModal");s(a.container).remove(),s("body").css("overflow",a.overflow)}}(jQuery);