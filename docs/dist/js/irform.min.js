/* irform.min.js (2018.04.18) by Blaise Lengrand
 */
!function(n){n.irRequire||(n.irRequire=function(e,r){return new Promise(function(t,i){n.irRequire.a(e,t,i,r||3e4)})},n.irRequire.a=function(functionName,resolve,reject,timeout){"string"==typeof functionName&&(functionName=[functionName]);var ready=1,poll=1;if(functionName.forEach(function(name){try{if(void 0===eval(name))throw 1;n.irRequire.h(name)}catch(e){ready=0;var m=irRequire.map;for(m[name]instanceof Array||(m[name]=m[name]?[m[name]]:[]);m[name].length;){var url=m[name].shift();if(m[url])return poll=0,irRequire(url,timeout).then(function(){irRequire.a(functionName,resolve,reject,timeout)});n.irRequire.h(name,url);var desc=0<=url.search(/\.css$/i)?["link","href",{rel:"stylesheet",type:"text/css"}]:["script","src",{type:"text/javascript",async:!0}],d=document;if(!d.querySelector(desc[0]+"["+desc[1]+'="'+url+'"]')){var elt=d.createElement(desc[0]);elt[desc[1]]=url,Object.assign(elt,desc[2]),elt.onerror=function(){reject(new Error("cannot load "+(elt.src||elt.href)))},d.getElementsByTagName("head")[0].appendChild(elt)}}}}),ready){var r=functionName.map(function(name){return eval(name)});resolve(1==r.length?r[0]:r)}else poll&&(0<timeout?setTimeout(function(){irRequire.a(functionName,resolve,reject,timeout-100)},100):reject(new Error(functionName.join()+" timed-out")))},n.irRequire.map={},n.irRequire.h=function(){})}(window);var Irform=function(r,t,e){this.container=$(r),this.formDescription=t,this.options=$.extend(!0,{},Irform.defaultOptions,e),this.container.empty(),this.container.addClass("irform-layout"),this.options.hookInit.call(this),this.create(r,t)};Irform.CHAR_A_Z=1,Irform.CHAR_0_9=2,Irform.CHAR_SPACE=4,Irform.CHAR_SPECIAL=8,Irform.CHAR_DASH=16,Irform.CHAR_UPPERCASE_ONLY=32,Irform.CHAR_LOWERCASE_ONLY=64,Irform.EMAIL={rule:"^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+.[a-zA-Z]{2,}$",msg:"Please enter a valid email"},Irform.defaultOptions={fields:{input:function(r,t){return $("<input>",{type:"text",name:r,class:"irform",placeholder:t.placeholder})},checkbox:function(r,t){var e=function(r,t,e){var i=$("<div>",{class:e?"irform-inline":""}),a=$("<input>",{type:"checkbox",name:r,class:"irform",id:"irform-checkbox-"+ ++Irform.unique});return $(i).append(a),$(i).append('<label for="'+$(a).prop("id")+'">'+t+"</label>"),i};if(!t.list)return e(r,"",!1);if(1==t.list.length)return e(r,t.list[0],!1);var i=$("<div>",{class:"irform-container",name:r}),a=t.list;for(var n in a){var o=e("string"==typeof n?n:a[n],a[n],t.inline);$(i).append(o)}return i},switch:function(r){var t=$("<div>",{class:"irform irform-switch"}),e=$("<input>",{type:"checkbox",name:r,id:"irform-switch-"+ ++Irform.unique});return $(t).append(e),$(t).append('<label for="'+$(e).prop("id")+'"></label>'),t},password:function(r,t){return $("<input>",{type:"password",name:r,class:"irform",placeholder:t.placeholder})},textarea:function(r,t){return $("<textarea>",{name:r,class:"irform",placeholder:t.placeholder})},submit:function(r,t){var e=$("<button>",{type:"button",name:r,class:"irform"});$(e).html(t.value||"Submit");var i=this;return $(e).click(function(){i.submit(t.callback)}),e},select:function(r,t){var e=$("<select>",{name:r,class:"irform"}),i=t.list;for(var r in i){var a=$("<option>",{value:i instanceof Array?i[r]:r});$(a).html(i[r]),$(e).append(a)}return e}},defaultType:"input",wrapper:function(r,t){var e=$("<div>");if("string"==typeof t.caption){var i=$("<div>",{class:"irform-caption"});$(i).text(t.caption),$(e).append(i)}var a=$("<div>",{class:"irform-elements"});return $(a).append(r),$(e).append(a),e},callbackError:function(r){this.container.find(".irform-item.error").removeClass("error");for(var t in r){var e="",i=null,a=r[t];switch($(a.item).removeClass("success").addClass("error"),a.type){case"required":e="This field is required",i="required-"+a.name;break;case"validation":e=a.msg?a.msg:"This field does not validate",i="validation-"+a.name}e&&Irnotify(e,{container:$(a.item).find(".irform-elements"),type:"error",id:i})}},callbackSuccess:function(r,t){$(r).removeClass("error").addClass("success"),Irnotify.delete("*",r)},callbackClean:function(){Irnotify.delete("*",this.container)},disable:function(r,t){var e=Irform.findNameHolder(t);$(e).find("input,textarea,select,button").add(e).prop("disabled",r),$(t).find("input,textarea,select,button").filter(".irform").prop("disabled",r),r?$(t).addClass("disable"):$(t).removeClass("disable"),Irform.queue(e,function(){$(e).trigger(r?"disable":"enable")})},hookInit:function(){}},Irform.validate=function(r,t){if("string"==typeof t){var e=[];return r&Irform.CHAR_UPPERCASE_ONLY&&/[a-z]/g.test(t)?"This field must be upper case only":r&Irform.CHAR_LOWERCASE_ONLY&&/[A-Z]/g.test(t)?"This field must be lower case only":(r&Irform.CHAR_A_Z&&(t=t.replace(/[a-z]/gi,""),e.push("alphanumeric characters")),r&Irform.CHAR_0_9&&(t=t.replace(/[0-9]/g,""),e.push("numbers")),r&Irform.CHAR_DASH&&(t=t.replace(/-_/g,""),e.push("underscores (_), dashes (-)")),r&Irform.CHAR_SPACE&&(t=t.replace(/[ ]/g,""),e.push("spaces")),r&Irform.CHAR_SPECIAL&&(t=t.replace(/[!"#\$%&'\(\)\*\+,\-\.\/:;<=>\?@\[\\\]^_`\{\|\}~]/g,""),e.push("special characters")),""===t||!e.length||"This field only accepts "+e.join(", "))}return!0},Irform.findNameHolder=function(r,t){return void 0===t&&(t=$(r).hasClass("irform-item")?$(r).attr("data-irform"):null),$(r).find("[name"+(t?"="+t:"")+"]").addBack("[name"+(t?"="+t:"")+"]").first()},Irform.prototype.create=function(r,t){void 0===Irform.unique&&(Irform.unique=0);for(var e in t){var i=this,a=$.extend({name:"irform"+ ++Irform.unique,type:this.options.defaultType,required:!1,validate:null,mask:null,disabled:!1,ignore:void 0===t[e].name,options:{}},t[e]),n=a.name;t[e]=a;var o=a.type;if("function"==typeof this.options.fields[o]){var s=this.options.fields[o].call(this,n,a,function(){$(this).removeClass("irform-pending"),Irform.queue(this)}),f=Irform.findNameHolder(s,n);$(f).on("change",function(){var r=$(this).prop("name")||$(this).attr("name"),t=Irform.get(this)[r],e=$(this).closest(".irform-item"),a=$(e).data("irform");if(!Irform.isEmpty(t)&&a.validate){var n=i.validate(e,t);!0===n?i.options.callbackSuccess.call(i,e,r):i.options.callbackError.call(i,[{type:"validation",msg:n,item:e,name:r,options:a}])}else!Irform.isEmpty(t)&&$(e).hasClass("required")&&i.options.callbackSuccess.call(i,e,r);"function"==typeof a.onchange?a.onchange.call(i,e,t):"object"==typeof a.onchange&&($(this).data("nextElement")&&$(e).nextUntil($(this).data("nextElement")).remove(),$(this).data("nextElement",$(e).next()),"object"==typeof a.onchange[t]?i.create(e,a.onchange[t]):"object"==typeof a.onchange.__default__&&i.create(e,a.onchange.__default__))});var l=this.options.wrapper.call(this,s,a,n);$(l).addClass("irform-item"),a.width&&$(l).css("width",a.width),a.align&&a.align.replace(/\s\s+/g," ").toLowerCase().split(" ").map(function(r){$(l).addClass("irform-align-"+r.trim())}),$(l).attr("data-irform",n),a.required&&$(l).addClass("required"),a.disabled&&Irform.queue(f,function(){i.options.disable.call(i,!0,$(this).closest(".irform-item"))}),a.mask&&$(f).on("input",function(){var r=$(this).closest(".irform-item").data("irform");Irform.mask(this,r.mask)}),$(l).data("irform",a),$(r).hasClass("irform-item")?$(r).after(l):$(r).append(l)}else console.log("'"+o+"' is not supported")}for(var e in t){n=t[e].name,f=Irform.findNameHolder(this.container,n);Irform.queue(f,function(){$(this).trigger("change")})}},Irform.mask=function(r,t){for(var e=$(r).val(),i="",a=0;a<t.length&&e;a++){var n=e[0];if("9"==t[a]){if(/[^0-9]/.test(n))break}else if("z"==t[a]){if(/[^a-z]/i.test(n))break}else if("*"==t[a]){if(/[^a-z0-9]/i.test(n))break}else if(t[a]!=n){i+=t[a];continue}i+=n,e=e.substr(1)}$(r).val(i)},Irform.prototype.submit=function(r){var t=this.get();if(!1!==t)if("function"==typeof r)r.call(this,t);else if(this.container.is("form")){var e=$("<form>",{action:this.container.prop("action"),method:this.container.prop("method")||"POST",enctype:"multipart/form-data",style:"display: none;"}),i=function(r,t){var e="";for(var a in r)"object"==typeof r[a]?e+=i(r[a],t?t+"["+a+"]":a):e+='<input name="'+(t?t+"["+a+"]":a)+'" value="'+(r[a]+"").replace(/"/g,"&quot;")+'"/>';return e},a=i(t,"");$(e).html(a),this.container.find("input[type=file]").each(function(){$(this).appendTo(e)}),$("body").append(e),e.submit()}},Irform.prototype.findNameHolder=function(r){return Irform.findNameHolder(this.container,r)},Irform.prototype.disable=function(){var r=this.options.disable;this.each(function(t){r.call(this,!0,t)})},Irform.prototype.enable=function(){var r=this.options.disable;this.each(function(t){r.call(this,!1,t)})},Irform.prototype.update=function(r){var t=this.get(function(){},!0);this.container.empty(),this.formDescription=r,this.create(this.container,r),this.set(t)},Irform.prototype.ignore=function(r,t){var e=$(r).data("irform");e.ignore=t,$(r).data("irform",e)},Irform.prototype.validate=function(r,t){var e=$(r).data("irform");return function r(t,e,i,a){var n=function(r){return!0===r||a||r};if($.isArray(i))for(var o in i){var s=r.call(this,t,e,i[o],a);if(!0!==s)return s}else{if("object"==typeof i)return r.call(this,t,e,i.rule,i.msg);if("number"==typeof i)return n(Irform.validate(i,e));if("string"==typeof i){if(!0===Irform.validate(Irform.CHAR_A_Z|Irform.CHAR_0_9|Irform.CHAR_DASH,i)){var f;if((f=this.findNameHolder(i)).length)return n(e==f.val()||"This field does not match '"+i+"'")}return n(!!new RegExp(i,"g").test(e)||null)}if("function"==typeof i)return n(i.call(this,e,t))}return!0}.call(this,r,t,e.validate,null)},Irform.prototype.each=function(r){var t=this;this.container.find(".irform-item").each(function(){r.call(t,this)})},Irform.prototype.get=function(r,t){var e=!1,i=[],a=this;void 0===t&&(t=!1);var n=$();this.each(function(r){n=n.add($("[name="+$(r).attr("data-irform")+"]"))}),this.options.callbackClean.call(this);var o=Irform.get(n,function(n,o){var s=$(this).closest(".irform-item"),f=s.data("irform");if(!t){if(f.ignore)return null;if(Irform.isEmpty(o)&&s.hasClass("required")&&(i.push({type:"required",item:s,name:n,options:f}),e=!0),f.validate){!0!==(l=a.validate(s,o))&&(i.push({type:"validation",msg:l,item:s,name:n,options:f}),e=!0)}if("function"==typeof r){var l;if(void 0!==(l=r.call(a,s,n,o)))return l}}});return e?(this.options.callbackError.call(this,i),!1):o},Irform.prototype.set=function(r){var t={};do{var e=!1;Irform.set(this.container,r,function(r){if(void 0!==t[r])return null;t[r]=!0,e=!0})}while(e)},Irform.queue=function(r,t){if("function"==typeof t)if($(r).hasClass("irform-pending")){(e=$(r).data("irform-queue")||[]).push(t),$(r).data("irform-queue",e)}else t.call(r);else{for(var e=$(r).data("irform-queue")||[];e.length;){(t=e.shift()).call(r)}$(r).data("irform-queue",[])}},Irform.set=function(r,t,e){var i=$(r).find("[name]").addBack("[name]").not("a").filter(function(){var t=$(this).parent().closest("[name]");return 0==t.length||0==$(r).find(t).length&&0==$(r).filter(t).length}),a=0;$(i).each(function(){var r=$(this).prop("name")||$(this).attr("name");if(void 0!==t[r]){var i=t[r];if("function"==typeof e){var n=e.call(this,r,i);if(void 0!==n){if(null===n)return;i=n}}Irform.queue(this,function(){$(this).hasClass("irform-container")?Irform.set($(this).children(),i):$(this).is("input[type=checkbox]")?$(this).prop("checked",i):$(this).val(i),$(this).trigger("change")}),delete t[r],a++}}),!jQuery.isEmptyObject(t)&&a&&Irform.set(r,t,e)},Irform.get=function(r,t){var e={},i=$(r).find("[name]").addBack("[name]").not("a").filter(function(){var t=$(this).parent().closest("[name]");return 0==t.length||0==$(r).find(t).length&&0==$(r).filter(t).length});return $(i).each(function(){if(!$(this).hasClass("irform-pending")){var r=$(this).prop("name")||$(this).attr("name");if(r){var i=$(this).hasClass("irform-container")?Irform.get($(this).children()):$(this).is("input[type=checkbox]")?$(this).is(":checked")?"selected":"":$(this).val();if("function"==typeof t){var a=t.call(this,r,i);if(void 0!==a){if(null===a)return;i=a}}e[r]=i}}}),e},Irform.jQueryHookVal=function(r,t,e){var i=jQuery.fn.val;jQuery.fn.val=function(a){if(!arguments.length)return $(this).is(r)?t.call(this):i.apply(this,arguments);var n=a;return $(this).each(function(){var t=n;$(this).is(r)?e.call(this,t):i.call($(this),t)}),this}},Irform.clear=function(r){$(r).find(".irform-array").trigger("array-empty"),$(r).find("[name]").val("").trigger("change")},Irform.isEmpty=function(r){if("object"==typeof r){var t=!0;for(var e in r)t&=Irform.isEmpty(r[e]);return t}return!r};var Irnotify=function(e,i){var t=(i=$.extend(!0,{},Irnotify.defaults,i)).container;i.id&&Irnotify.delete(i.id,t);var n=$(t).children(".irnotify");if(n.length||(n=$("<div/>",{class:"irnotify"}),$(t).prepend(n)),i.group){var r=$(n).children(".irnotify-group."+i.type);r.length||(r=$("<div/>",{class:"irnotify-group "+i.type}),$(n).prepend(r)),n=r}var o=$("<div/>",{class:"irnotify-entry "+i.type+(i.id?" irnotify-id-"+i.id:"")}),d=$("<div/>",{class:"message"});if($(d).html(e),$(o).append(d),i.delete){var s=$("<div/>",{class:"delete"});$(s).html(i.delete),$(s).click(function(){Irnotify.delete(this)}),$(o).append(s)}$(n).append(o),this.entry=o};Irnotify.prototype.delete=function(){Irnotify.delete(this.entry)},Irnotify.delete=function(e,i){"string"==typeof e&&(e=$(i||"body").find("*"==e?"[class*=irnotify-id-]":".irnotify-id-"+e)),$(e).closest(".irnotify-entry").each(function(){var e=$(this),i=e.parent();e.remove(),i.hasClass("irnotify-group")&&!i.children().length&&(i=(e=i).parent(),e.remove()),i.hasClass("irnotify")&&!i.children().length&&i.remove()})},Irnotify.defaults={group:!1,id:null,delete:'<span class="icon-cross"></span>',type:"info",container:"body"};!function(r){r.fn.irformArray=function(t,a){var e;return r(this).each(function(){e=r().irformArray.x.call(this,t,a)}),void 0===e?r(this):e},r.fn.irformArray.x=function(t){var a=r.fn.irformArray.defaults,e="create";switch("string"==typeof t&&(e=t),"create"!=e&&r(this).data("irformArray")&&(a=r(this).data("irformArray")),"object"==typeof t&&(a=r.extend(!0,{},a,t)),r(this).data("irformArray",a),e){case"create":r.fn.irformArray.create.call(this)}},r.fn.irformArray.deleteItem=function(t){!0!==r(this).prop("disabled")&&r(t).remove()},r.fn.irformArray.moveItemUp=function(t){if(!0!==r(this).prop("disabled")){var a=r(t).prev(".irform-array-item");a.length&&(r(t).detach(),a.before(t))}},r.fn.irformArray.moveItemDown=function(t){if(!0!==r(this).prop("disabled")){var a=r(t).next(".irform-array-item");a.length&&(r(t).detach(),a.after(t))}};var t=null;r(document).on("mouseup touchend",function(a){t&&(a.stopPropagation(),r(t.item).removeClass("irform-array-item-drag"),r(t.obj).addClass("irform-array-drag"),r(t.placeholder).parents("html").length&&(r(t.item).detach(),r(t.placeholder).before(t.item)),r(t.placeholder).remove(),t=!1)});r.fn.irformArray.add=function(){var t=this,a=r(this).data("irformArray"),e=a.template,o=r("<div>",{class:"irform-array-item"});if(a.inline&&(r(o).addClass("inline"),r(o).css("display","inline-block")),a.isDelete){var i=r("<div>",{class:"irform-array-item-del"});r(i).html(a.delete),r(i).click(function(){r.fn.irformArray.deleteItem.call(t,o)}),r(o).append(i)}if(a.isMove){var n=r("<div>",{class:"irform-array-item-up"});r(n).html(a.up),r(n).click(function(){r.fn.irformArray.moveItemUp.call(t,o)}),r(o).append(n);var l=r("<div>",{class:"irform-array-item-down"});r(l).html(a.down),r(l).click(function(){r.fn.irformArray.moveItemDown.call(t,o)}),r(o).append(l)}var f=r("<div>",{class:"irform-array-item-content"});"function"==typeof e?r(f).html(e.call(t,o)):"object"==typeof e?new Irform(f,e):r(f).html(r(e).clone(!0,!0)),r(o).append(f),r(this).find(".irform-array-content:first").append(o),a.hookAdd.call(t,o)},r.fn.irformArray.clear=function(){r(this).find(".irform-array-content:first").empty()},r.fn.irformArray.create=function(){var a=this,e=r(this).data("irformArray");r(a).empty(),r(a).addClass("irform-array"),r(a).attr("name",e.name);var o=r("<div>",{class:"irform-array-content",style:e.inline?"display:inline-block;":""});if(r(a).append(o),e.isDrag){var i=function(r){return r.originalEvent.touches&&r.originalEvent.touches.length?{x:r.originalEvent.touches[0].pageX,y:r.originalEvent.touches[0].pageY}:{x:r.pageX,y:r.pageY}};r(o).on("mousemove touchmove",function(e){if(t){var n=i(e);t.init&&(r(t.placeholder).html("&nbsp;"),r(t.item).before(t.placeholder),r(t.item).addClass("irform-array-item-drag"),r(a).addClass("irform-array-drag"),t.init=!1),r(t.item).css({left:n.x+t.offsetX,top:n.y+t.offsetY});var l=document.elementsFromPoint(n.x-r(document).scrollLeft(),n.y-r(document).scrollTop()),f=l.indexOf(o.get(0));if(f>0&&l[f-1].classList.contains("irform-array-item")&&!l[f-1].classList.contains("irform-array-placeholder")){r(t.placeholder).detach();var s=l[f-1];do{if(r(s).offset().left<=n.x&&r(s).offset().top<=n.y&&r(s).offset().left+r(s).outerWidth(!0)>=n.x&&r(s).offset().top+r(s).outerHeight(!0)>=n.y){r(s).before(t.placeholder);break}s=r(s).next()}while(r(s).length);r(s).length||r(a).find(".irform-array-item:last").after(t.placeholder)}}}),r(o).on("mousedown touchstart",e.dragHandleSelector,function(e){e.stopPropagation(),e.preventDefault();var o=i(e),n=r(this).closest(".irform-array-item");t={init:!0,obj:a,item:n,offsetX:r(n).offset().left-o.x-r(document).scrollLeft(),offsetY:r(n).offset().top-o.y-r(document).scrollTop(),placeholder:r("<div/>",{class:"irform-array-placeholder "+r(n).attr("class"),style:"width: "+r(n).width()+"px; height: "+r(n).height()+"px; "+r(n).attr("style")})}})}if(r(a).on("array-add",function(t){t.stopPropagation(),r.fn.irformArray.add.call(a)}),r(a).on("array-empty",function(t){t.stopPropagation(),r.fn.irformArray.clear.call(a)}),e.isAdd){var n=r("<div>",{class:"irform-array-add",style:"display:inline-block;"});r(n).html(e.add),r(n).click(function(){!0!==r(a).prop("disabled")&&r(a).trigger("array-add")}),r(a).append(n)}if(e.custom){var l=r("<div>",{style:"display:inline-block;"});r(l).html(e.custom),r(a).append(l)}},r.fn.irformArray.defaults={name:null,template:'<input class="irform" type="text" name="text" />',inline:!1,isDelete:!0,isAdd:!0,isMove:!0,isDrag:!1,dragHandleSelector:".irform-array-item",delete:'<button class="irform dock-left" type="button"><span class="icon-cross"></span></button>',add:'<button class="irform" type="button"><span class="icon-plus"></span> Add</button>',up:'<button class="irform dock-right" type="button"><span class="icon-arrow-up"></span></button>',down:'<button class="irform dock-left dock-right" type="button"><span class="icon-arrow-down"></span></button>',custom:null,hookAdd:function(){},hookValWrite:function(r){return r},hookValRead:function(r){return r}}}(jQuery),Irform.jQueryHookVal(".irform-array",function(){var r=[];$(this).children(".irform-array-content:first").children(".irform-array-item").each(function(t){r[t]=Irform.get(this)});return $(this).data("irformArray").hookValRead.call(this,r)},function(r){r=$(this).data("irformArray").hookValWrite.call(this,r),$(this).trigger("array-empty");for(var t in r){$(this).trigger("array-add");var a=$(this).children(".irform-array-content:first").children(".irform-array-item:last");Irform.set(a,r[t])}}),Irform.defaultOptions.fields.array=function(r,t){var a=$("<div>");return $(a).irformArray({name:r,template:t.template}),a};!function(r){r.fn.irformArrayTags=function(i){r(this).irformArray(r.extend(!0,r.fn.irformArrayTags.defaults,i))},r.fn.irformArrayTags.defaults={template:'<span><span class="irform-array-tags-edit"><input type="text" class="irform inline" name="keyword"/></span><span class="irform-array-tags-tag irform border inline clickable" style="display: none;"><span></span><span class="irform-array-item-del" style="margin-left: 10px;"><span class="icon-cross"></span></span></span></span>',isMove:!1,isDelete:!1,isDrag:!0,dragHandleSelector:".irform-array-item .irform-array-tags-tag > span:not(.irform-array-item-del)",inline:!0,hookAdd:function(i){var a=this,n=r(i).find(".irform-array-tags-edit"),t=r(i).find(".irform-array-tags-tag");r(i).find("input").on("blur",function(){var e=r(this).val();e?(r(n).hide(),r(t).find("span:first").text(e),r(t).show()):r().irformArray.deleteItem.call(a,i)}).on("change",function(){r(this).trigger("blur")}),r(t).click(function(){!0!==r(a).prop("disabled")&&(r(a).find(".irform-array-item").not(i).find("input").trigger("blur"),r(this).hide(),r(n).show())}),r(i).find(".irform-array-item-del").click(function(){r().irformArray.deleteItem.call(a,i)}),r(this).find(".irform-array-item").not(i).find("input").trigger("blur")},hookValWrite:function(r){return r.split(",").map(function(r){return{keyword:r.trim()}})},hookValRead:function(r){return r.map(function(r){return r.keyword}).join(", ")}}}(jQuery),Irform.defaultOptions.fields.tags=function(r){var i=$("<div>");return i.irformArrayTags({name:r}),i};!function(r){r.fn.irformArrayImages=function(i){var n=this;r(this).irformArray(r.extend(!0,r.fn.irformArrayImages.defaults,{custom:r("<div/>").irformFile({showInput:!1,hookSelect:function(i,a){r(n).trigger("array-add"),console.log(i,a)}})},i))},r.fn.irformArrayImages.defaults={template:'<span class="irform-array-images irform"><span class="irform-array-images-del"><span class="icon-cross"></span></span><img /><input name="img" style="display: none;" /></span>',isMove:!1,isDelete:!1,isAdd:!1,isDrag:!0,dragHandleSelector:".irform-array-item img",inline:!0,hookAdd:function(i){var n=this;r(i).find("input").on("blur",function(){var n=r(this).val();r(i).find("img").attr("src",n)}).on("change",function(){r(this).trigger("blur")}),r(i).find(".irform-array-images-del").click(function(){r().irformArray.deleteItem.call(n,i)})},hookValWrite:function(r){return r.map(function(r){return{img:r.trim()}})},hookValRead:function(r){return r.map(function(r){return r.img})}}}(jQuery),Irform.defaultOptions.fields.images=function(r){var i=$("<div>");return i.irformArrayImages({name:r}),i};!function(o){o.fn.irformDropdown=function(r,t){var n;return o(this).each(function(){n=o().irformDropdown.x.call(this,r,t)}),void 0===n?o(this):n},o.fn.irformDropdown.x=function(r){var t=o.fn.irformDropdown.defaults,n="create";switch("string"==typeof r&&(n=r),"create"!=n&&o(this).data("irformDropdown")&&(t=o(this).data("irformDropdown")),"object"==typeof r&&(t=o.extend(!0,{},t,r)),o(this).data("irformDropdown",t),n){case"create":o.fn.irformDropdown.create.call(this)}},o(document).on("mousedown touchstart",function(){o(".irform-dropdown-menu").hide()}),o.fn.irformDropdown.create=function(){var r=o(this).data("irformDropdown"),t=this;o.fn.irformDropdown.setList.call(this,r.list);var n=o("<div>",{class:"irform-dropdown"}),i=o("<input>",{name:r.name,style:"display: none;"});o(n).append(i);var e=o("<div>",{contenteditable:r.editable,class:r.selectMode?"irform-dropdown-select":"irform-dropdown-input"});o(n).append(e);var a=o("<div>",{class:"irform-dropdown-menu"});o(a).on("click",".irform-dropdown-item",function(){o(e).text(o(this).text()).trigger("change"),o(a).hide()}),o(a).on("mousedown touchstart",function(o){o.stopPropagation()}),o(n).append(a),r.selectMode&&o(e).on("click",function(r){o(this).trigger("input",!0)}),o(e).on("blur keyup paste copy cut mouseup change",function(){o(i).val(o(this).text())}),o(e).on("input",function(n,i){var e=o(this).text(),s=r.updateList.call(this,e),d=function(n){n&&n instanceof Array&&o.fn.irformDropdown.setList.call(t,n);var s=[],d=e.toLowerCase();o(t).data("irformDropdown-list").forEach(function(t){var n=i?1:o.fn.irformDropdown.search(d,t[1],r.minWeight);n>0&&s.push([n,t[0]])}),o(a).empty().show(),s.sort(function(o,r){return r[0]-o[0]}).slice(0,r.maxResults).forEach(function(r){var t=o("<div>",{class:"irform-dropdown-item"});t.text(r[1]),o(a).append(t)})};s instanceof Promise?s.then(d).catch(console.error):d(s)}),o(this).append(n)},o.fn.irformDropdown.search=function(o,r,t){var n=o.charAt(0);if(!n)return 0;for(var i=-1,e=0;-1!=(i=r.indexOf(n,i+1));){for(var a=i?.9:1,s=i,d=1;d<o.length;++d){var f=o.charAt(d);r.charAt(s+1)==f?(a+=1,s+=1):r.charAt(s+2)==f?(a+=.5,s+=2):r.charAt(s-1)==f?a+=.5:++s}e=Math.max(e,a)}return e/=o.length,!t||e>t?e:0},o.fn.irformDropdown.setList=function(r){var t=[];r.forEach(function(o){t.push([o,o.toLowerCase()])}),o(this).data("irformDropdown-list",t)},o.fn.irformDropdown.defaults={name:"dropdown",editable:!0,minWeight:.6,maxResults:10,selectMode:!0,updateList:function(o){},list:[]}}(jQuery),Irform.defaultOptions.fields.dropdown=function(o,r){var t=$("<div>"),n={name:o,list:r.list};return"object"==typeof r.options&&(n=$.extend(!0,n,r.options)),$(t).irformDropdown(n),t};!function(t){t.fn.irformCustom=function(r,o){var i;return t(this).each(function(){i=t().irformCustom.x.call(this,r,o)}),void 0===i?t(this):i},t.fn.irformCustom.x=function(r,o){var i=t.fn.irformCustom.defaults,a="create";switch("string"==typeof r&&(a=r),"create"!=a&&t(this).data("irformCustom")&&(i=t(this).data("irformCustom")),"object"!=typeof r&&"create"!=a||(i=t.extend(!0,{},i,r)),t(this).data("irformCustom",i),a){case"create":t.fn.irformCustom.create.call(this)}},t.fn.irformCustom.create=function(){t(this).addClass("irform irform-custom"),t(this).html("&nbsp;")},t.fn.irformCustom.defaults={value:null,hookValWrite:function(t){return[t,t]},hookValRead:function(t){return t}}}(jQuery),Irform.jQueryHookVal(".irform-custom",function(){var t=$(this).data("irformCustom");return t.hookValRead.call(this,t.value)},function(t){var r=$(this).data("irformCustom"),o=r.hookValWrite.call(this,t);r.value=o[0],$(this).data("irformCustom",r),$(this).html(o[1])});!function(e){e.fn.irformTinymce=function(i,t){var n;return e(this).each(function(){n=e().irformTinymce.x.call(this,i,t)}),void 0===n?e(this):n},e.fn.irformTinymce.x=function(i){var t=e.fn.irformTinymce.defaults,n="create";switch("string"==typeof i&&(n=i),"create"!=n&&e(this).data("irformTinymce")&&(t=e(this).data("irformTinymce")),"object"==typeof i&&(t=e.extend(!0,{},t,i)),e(this).data("irformTinymce",t),n){case"create":e.fn.irformTinymce.create.call(this)}},e.fn.irformTinymce.create=function(){void 0===e.fn.irformTinymce.create.id&&(e.fn.irformTinymce.create.id=0);var i=this,t=e(this).data("irformTinymce");e(this).addClass("irform-tinymce irform-pending"),e(this).attr("name",t.name),e(this).attr("id")||e(this).attr("id","irform-tinymce-id"+e.fn.irformTinymce.create.id++);var n=e.extend(!0,{selector:"#"+e(this).attr("id"),convert_urls:!1,file_browser_callback:function(n,r,a){t.callbackBrowser.call(i,a,function(i){e("#"+n).val(i)})},init_instance_callback:function(){t.callbackIsReady.call(i)},setup:function(t){t.on("change",function(){e(i).trigger("change")})}},t.tinymce);e(this).on("disable",function(){tinyMCE.get(e(this).prop("id")).setMode("readonly")}),e(this).on("enable",function(){tinyMCE.get(e(this).prop("id")).setMode("design")}),t.css&&(n.content_css=t.css),t.cssClass&&(n.body_class=t.cssClass),t.baseURL&&(n.document_base_url=t.baseURL),t.tinymceBase&&(tinymce.baseURL=t.tinymceBase),tinymce.suffix=".min",setTimeout(function(){tinymce.init(n)},100)},e.fn.irformTinymce.defaults={name:null,tinymceBase:null,baseURL:null,css:null,cssClass:null,callbackIsReady:function(){},callbackBrowser:function(){},tinymce:{menubar:!1,statusbar:!1,autoresize_max_height:e(window).innerHeight()-100,toolbar:"undo redo | styleselect | bold italic | forecolor | removeformat | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media table | code | fullscreen",plugins:["advlist autolink autoresize link image lists charmap print preview hr anchor pagebreak spellchecker","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","save table contextmenu directionality emoticons template paste textcolor"]}}}(jQuery),Irform.jQueryHookVal(".irform-tinymce",function(){return tinyMCE.get($(this).prop("id")).getContent()},function(e){return tinyMCE.get($(this).prop("id")).setContent(e)}),Irform.defaultOptions.fields.htmleditor=function(e,i,t){var n=$("<div>");return $(n).irformTinymce($.extend(!0,{},{name:e,callbackIsReady:function(){t.call(this)}},i.options)),n};!function(i){i.fn.irformFile=function(t,e){var o;return i(this).each(function(){o=i().irformFile.x.call(this,t,e)}),void 0===o?i(this):o},i.fn.irformFile.x=function(t){var e=i.fn.irformFile.defaults,o="create";switch("string"==typeof t&&(o=t),"create"!=o&&i(this).data("irformFile")&&(e=i(this).data("irformFile")),"object"==typeof t&&(e=i.extend(!0,{},e,t)),i(this).data("irformFile",e),o){case"create":i.fn.irformFile.create.call(this)}},i.fn.irformFile.create=function(){var t=i(this).data("irformFile"),e=this,o=i("<div>",{class:"irform-group"}),n=i("<input>",{name:t.name,class:"irform",style:t.showInput?"":"display: none;"});i(o).append(n),t.showInput||i(o).append(i("<span/>"));for(var a in t.buttonList){var r=t.buttonList[a],l=t.presets[r],f=i("<button>",{class:"irform",type:"button"});i(f).text(l.caption),i(f).data("irformFile",l),i(f).click(function(){var t=function(t){t&&o.hookSelect.call(e,r,t),i(n).val(t)},o=i(e).data("irformFile"),a=i(this).data("irformFile");o.clean&&o.clean.call(e,t),o.clean=a.clean?a.clean:null,i(e).data("irformFile",o),a.action.call(e,t,a.options)}),i(o).append(f)}i(this).append(o)},i.fn.irformFile.defaults={name:"file",buttonList:["upload"],fileType:null,showInput:!0,hookSelect:function(i,t){},presets:{upload:{caption:"Upload",action:function(t,e){var o=i(this).data("irformFile"),n=i("<input>",{type:"file",class:"irform-file-upload",name:o.name+("multi"==e.mode?"[]":""),multiple:"multi"==e.mode});i(n).on("change",function(){var i="";if("object"==typeof this.files)for(var e=0;e<this.files.length;e++)i+=(i?" ":"")+'"'+this.files.item(e).name+'"';t(i)}),i(n).on("click",function(i){i.stopPropagation()}),i(n).hide(),i(this).append(n),i(n).trigger("click")},options:{mode:"multi"},clean:function(t){t(""),i(this).find(".irform-file-upload").remove()}}}}}(jQuery),Irform.defaultOptions.fields.file=function(i,t){var e=$("<div>"),o={name:i};return"object"==typeof t.options&&(o=$.extend(!0,o,t.options)),$(e).irformFile(o),e};!function(a){a.fn.irformModal=function(o,t){var r;return a(this).each(function(){r=a().irformModal.x.call(this,o,t)}),void 0===r?a(this):r},a.fn.irformModal.x=function(o){var t=a.fn.irformModal.defaults,r="create";switch("string"==typeof o&&(r=o),"create"!=r&&a(this).data("irformModal")&&(t=a(this).data("irformModal")),"object"==typeof o&&(t=a.extend(!0,{},t,o)),a(this).data("irformModal",t),r){case"create":a.fn.irformModal.create.call(this);break;case"close":a.fn.irformModal.close.call(this)}},a.fn.irformModal.defaults={zIndex:99999,closeOnClickOutside:!0,isCancel:!1,onValidate:null,validate:'<button class="irform" type="button"><span class="icon-check"></span>&nbsp;Validate</button>',cancel:'<button class="irform" type="button"><span class="icon-cross"></span>&nbsp;Cancel</button>'},a.fn.irformModal.create=function(){var o=this,t=a(this).data("irformModal"),r=a("<div>",{class:"irform-modal-container"}),i=a("<div>",{class:"irform-modal-content"});a(i).append(this),a(r).append(i);var n=a("<div>",{class:"irform-modal-control"});if(t.isCancel){var l=a("<span>");a(l).html(t.cancel),a(l).click(function(){a.fn.irformModal.close.call(o)}),a(n).append(l)}if(t.onValidate){var e=a("<span>");a(e).html(t.validate),a(e).click(function(){a(o).data("irformModal").onValidate.call(o),a.fn.irformModal.close.call(o)}),a(n).append(e)}a(r).append(n);var s=a("<div>",{class:"irform-modal"});a(s).css({top:0,left:0,width:"100%",height:"100%",position:"fixed",zIndex:t.zIndex}),a(s).append(r),t.container=s,t.overflow=a("body").css("overflow"),a(this).data("irformModal",t),t.closeOnClickOutside&&(a(s).data("irformModal",0),a(s).mousedown(function(o){a(this).data("irformModal",o)}).mouseup(function(t){var r=a(this).data("irformModal");r&&Math.abs(r.pageX-t.pageX)<5&&Math.abs(r.pageY-t.pageY)<5&&(t.preventDefault(),a.fn.irformModal.close.call(o)),a(this).data("irformModal",0)}),a(r).mousedown(function(a){return a.stopPropagation(),!1}).mouseup(function(a){return a.stopPropagation(),!1})),a("body").append(s),a("body").css("overflow","hidden")},a.fn.irformModal.close=function(){var o=a(this).data("irformModal");a(o.container).remove(),a("body").css("overflow",o.overflow)}}(jQuery);